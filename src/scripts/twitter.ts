export {};
type opensea_collections = {
  id: number;
  status: number;
  slug: string;
  name: string;
  contract_id: number;
  contract_address: string;
  description: string | null;
  from_index: number;
  end_index: number;
  total_supply: number;
  current_supply: number;
  total_revealed: number;
  banner_image_url: string;
  image_url: string;
  etherscan_url: string;
  external_url: string;
  wiki_url: string;
  discord_url: string;
  twitter_username: string;
  instagram_username: string;
  takerrelayerfee: number;
  num_owners: number;
  total_sales: number;
  thirty_day_sales: number;
  seven_day_sales: number;
  one_day_sales: number;
  one_day_volume: string;
  seven_day_volume: string;
  thirty_day_volume: string;
  market_cap: string;
  floor_price: string;
  created_date: string;
  token: string;
  create_time: Date;
  update_time: Date | null;
};
const match = async () => {
  const title = document.title;

  const titleMatched = title.match(/^(.*?)\(\@(.*?)\) \/ Twitter/);
  console.log(titleMatched);
  if (titleMatched) {
    const [, name, username] = titleMatched;
    const res = await fetch("http://localhost:8080/nfts/by_twitter/" + username);
    const json = await res.json();
    console.log(json);
    if (json.success) {
      if (json.data) {
        const links = [
          {
            name: "opensea",
            url: "https://opensea.io/assets/" + json.data.id,
            icon: '<svg t="1657885620850" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1553" width="400" height="400"><path d="M136.106667 566.528l2.986666-4.693333 180.053334-281.642667a6.144 6.144 0 0 1 10.794666 0.768c30.08 67.413333 56.064 151.253333 43.904 203.434667-5.205333 21.504-19.413333 50.56-35.413333 77.44a141.738667 141.738667 0 0 1-6.784 11.477333 6.101333 6.101333 0 0 1-5.12 2.688h-185.173333a6.144 6.144 0 0 1-5.248-9.472z" p-id="1554" fill="#fff"></path><path d="M938.666667 618.88v44.586667a6.4 6.4 0 0 1-3.84 5.845333c-13.952 5.973333-61.653333 27.861333-81.493334 55.466667C802.688 795.221333 764.032 896 677.546667 896H316.8C188.928 896 85.333333 792.021333 85.333333 663.765333v-4.138666c0-3.413333 2.773333-6.186667 6.186667-6.186667h201.088c4.010667 0 6.912 3.712 6.570667 7.594667-1.450667 13.098667 0.981333 26.453333 7.168 38.613333 11.946667 24.277333 36.693333 39.424 63.445333 39.424H469.333333V661.333333H370.901333a6.357333 6.357333 0 0 1-5.12-9.941333c1.066667-1.664 2.304-3.370667 3.584-5.290667 9.301333-13.226667 22.613333-33.749333 35.84-57.173333 9.002667-15.786667 17.749333-32.64 24.789334-49.536 1.450667-3.072 2.56-6.186667 3.712-9.258667 1.92-5.418667 3.925333-10.453333 5.333333-15.488 1.408-4.266667 2.56-8.746667 3.712-12.970666 3.328-14.336 4.736-29.568 4.736-45.354667 0-6.186667-0.256-12.672-0.853333-18.858667a244.906667 244.906667 0 0 0-1.962667-20.266666 208.981333 208.981333 0 0 0-2.773333-18.048 304.64 304.64 0 0 0-5.717334-27.008l-0.768-3.413334c-1.706667-6.186667-3.114667-12.117333-5.12-18.304A690.261333 690.261333 0 0 0 411.392 294.4c-2.517333-7.04-5.333333-13.781333-8.192-20.565333-4.181333-10.154667-8.448-19.413333-12.373333-28.16a393.728 393.728 0 0 1-5.418667-11.306667 398.72 398.72 0 0 0-5.888-12.373333c-1.408-3.029333-3.072-5.888-4.181333-8.746667l-12.16-22.442667a3.968 3.968 0 0 1 4.48-5.76l76.074666 20.608h0.213334l0.298666 0.085334 10.026667 2.773333 11.008 3.114667 4.053333 1.152v-45.226667c0-21.845333 17.493333-39.552 39.125334-39.552 10.794667 0 20.608 4.394667 27.648 11.605333a39.765333 39.765333 0 0 1 11.434666 27.946667V234.666667l8.106667 2.261333c0.64 0.213333 1.28 0.512 1.877333 0.938667 1.962667 1.493333 4.821333 3.712 8.448 6.4 2.858667 2.261333 5.888 5.034667 9.6 7.893333 7.338667 5.888 16.085333 13.525333 25.685334 22.272 2.56 2.176 5.034667 4.48 7.296 6.741333 12.373333 11.52 26.24 25.045333 39.466666 39.978667 3.712 4.181333 7.338667 8.448 11.050667 12.928 3.669333 4.565333 7.594667 9.045333 11.008 13.525333 4.48 5.973333 9.301333 12.16 13.525333 18.602667 1.962667 3.072 4.266667 6.186667 6.186667 9.258667 5.376 8.192 10.154667 16.64 14.72 25.088 1.92 3.925333 3.882667 8.192 5.589333 12.373333 5.077333 11.306667 9.045333 22.826667 11.605334 34.346667 0.768 2.517333 1.365333 5.205333 1.621333 7.637333v0.554667c0.853333 3.413333 1.152 7.04 1.450667 10.752a114.901333 114.901333 0 0 1-6.186667 50.346666c-1.706667 4.821333-3.413333 9.856-5.632 14.634667-4.266667 9.898667-9.301333 19.754667-15.274667 29.013333-1.92 3.413333-4.224 7.04-6.485333 10.453334-2.474667 3.626667-5.034667 7.04-7.338667 10.368-3.114667 4.266667-6.442667 8.746667-9.856 12.757333a135.253333 135.253333 0 0 1-9.6 12.074667c-4.778667 5.632-9.344 10.965333-14.08 16.085333a146.773333 146.773333 0 0 1-9.045333 9.813333c-3.072 3.413333-6.186667 6.442667-9.045333 9.301334a360.192 360.192 0 0 1-12.074667 11.52l-7.808 7.168a6.4 6.4 0 0 1-4.224 1.578666h-60.586667v77.738667h76.245334c17.066667 0 33.28-6.058667 46.378666-17.152 4.48-3.925333 24.021333-20.821333 47.146667-46.378667a5.888 5.888 0 0 1 2.901333-1.749333l210.56-60.885333a6.229333 6.229333 0 0 1 7.893334 5.973333z" p-id="1555" fill="#fff"></path></svg>',
          },
          {
            name: "etherscan",
            url: json.data.etherscan_url,
            icon: '<svg class="" fill="#fff" height="18" viewBox="0 0 293.775 293.671" width="18" xmlns="http://www.w3.org/2000/svg"><g id="etherscan-logo-circle" transform="translate(-219.378 -213.33)"><path d="M280.433,353.152A12.45,12.45,0,0,1,292.941,340.7l20.737.068a12.467,12.467,0,0,1,12.467,12.467v78.414c2.336-.692,5.332-1.43,8.614-2.2a10.389,10.389,0,0,0,8.009-10.11V322.073a12.469,12.469,0,0,1,12.468-12.47h20.778a12.469,12.469,0,0,1,12.467,12.467v90.279s5.2-2.106,10.269-4.245a10.408,10.408,0,0,0,6.353-9.577V290.9a12.466,12.466,0,0,1,12.466-12.467h20.778A12.468,12.468,0,0,1,450.815,290.9v88.625c18.014-13.055,36.271-28.758,50.759-47.639a20.926,20.926,0,0,0,3.185-19.537,146.6,146.6,0,0,0-136.644-99.006c-81.439-1.094-148.744,65.385-148.736,146.834a146.371,146.371,0,0,0,19.5,73.45,18.56,18.56,0,0,0,17.707,9.173c3.931-.346,8.825-.835,14.643-1.518a10.383,10.383,0,0,0,9.209-10.306V353.152" data-name="Path 1" id="Path_1"></path><path d="M244.417,398.641A146.808,146.808,0,0,0,477.589,279.9c0-3.381-.157-6.724-.383-10.049-53.642,80-152.686,117.4-232.79,128.793" data-name="Path 2" id="Path_2" transform="translate(35.564 80.269)"></path></g></svg>',
          },
          {
            name: "Twitter",
            url: "https://twitter.com/" + json.data.twitter_username,
            icon: '<svg class="" fill="#fff" viewBox="0 0 18 16" style="height: 20px; width: 20px;"  xmlns="http://www.w3.org/2000/svg"><path d="M.09 13.791c1.992.14 3.728-.344 5.327-1.571-.816-.098-1.527-.311-2.127-.786-.584-.466-1.032-1.047-1.272-1.841h1.48c.008-.033.016-.066.024-.107-.816-.237-1.512-.663-2.032-1.342-.52-.67-.775-1.448-.8-2.3.52.148 1.016.295 1.52.434.016-.033.04-.065.056-.098-.72-.606-1.24-1.334-1.431-2.275a3.92 3.92 0 01.391-2.7c2 2.389 4.511 3.715 7.598 3.936-.096-.778-.104-1.498.16-2.202.912-2.463 3.983-3.249 5.894-1.481.216.196.4.229.632.147.632-.229 1.255-.474 1.903-.72-.248.81-.784 1.408-1.415 1.989.615-.164 1.231-.336 1.839-.5.024.025.048.041.072.066-.464.491-.912 1.007-1.415 1.449-.272.237-.36.458-.376.818-.144 4.01-1.752 7.25-5.175 9.289-3.487 2.07-7.077 1.947-10.612-.025-.064-.04-.12-.09-.24-.18z"></path></svg>',
          },
          {
            name: "discord",
            url: json.data.discord_url,
            icon: '<svg class="" fill="#fff" viewBox="0 0 22 16" style="height: 20px; width: 20px;"  xmlns="http://www.w3.org/2000/svg"><path d="M8.11.5c-.28.002-2.574.067-4.996 1.873 0 0-2.584 4.665-2.584 10.408 0 0 1.507 2.593 5.473 2.719 0 0 .664-.792 1.202-1.477-2.278-.685-3.14-2.108-3.14-2.108s.18.126.502.307c.018 0 .035.019.07.036.055.035.108.054.162.09.448.252.896.45 1.31.611.736.307 1.615.576 2.639.774 1.346.252 2.925.342 4.646.019a12.954 12.954 0 002.603-.774 10.118 10.118 0 002.062-1.063s-.896 1.458-3.247 2.125c.538.666 1.185 1.439 1.185 1.439 3.965-.126 5.473-2.72 5.473-2.7 0-5.746-2.584-10.409-2.584-10.409C16.32.446 13.861.5 13.861.5l-.251.288c3.05.918 4.468 2.27 4.468 2.27a14.856 14.856 0 00-5.4-1.711 15.048 15.048 0 00-3.626.036c-.107 0-.197.019-.306.035-.628.072-2.153.288-4.073 1.135-.663.288-1.059.505-1.059.505S5.088 1.635 8.317.717L8.137.5h-.028zm-.457 6.645c1.022 0 1.849.882 1.83 1.981 0 1.1-.808 1.982-1.83 1.982-1.005 0-1.83-.883-1.83-1.982s.806-1.981 1.83-1.981zm6.55 0c1.004 0 1.83.882 1.83 1.981 0 1.1-.809 1.982-1.83 1.982-1.006 0-1.83-.883-1.83-1.982s.806-1.981 1.83-1.981z"></path></svg>',
          },
          {
            name: "website",
            url: json.data.external_url,
            icon: '<svg class="" fill="#fff" viewBox="1 1 22 22" style="height: 20px; width: 20px;"  xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M2 12C2 6.48 6.47 2 11.99 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 11.99 22C6.47 22 2 17.52 2 12ZM15.97 8H18.92C17.96 6.35 16.43 5.07 14.59 4.44C15.19 5.55 15.65 6.75 15.97 8ZM12 4.04C12.83 5.24 13.48 6.57 13.91 8H10.09C10.52 6.57 11.17 5.24 12 4.04ZM4 12C4 12.69 4.1 13.36 4.26 14H7.64C7.56 13.34 7.5 12.68 7.5 12C7.5 11.32 7.56 10.66 7.64 10H4.26C4.1 10.64 4 11.31 4 12ZM5.08 16H8.03C8.35 17.25 8.81 18.45 9.41 19.56C7.57 18.93 6.04 17.66 5.08 16ZM5.08 8H8.03C8.35 6.75 8.81 5.55 9.41 4.44C7.57 5.07 6.04 6.34 5.08 8ZM12 19.96C11.17 18.76 10.52 17.43 10.09 16H13.91C13.48 17.43 12.83 18.76 12 19.96ZM9.5 12C9.5 12.68 9.57 13.34 9.66 14H14.34C14.43 13.34 14.5 12.68 14.5 12C14.5 11.32 14.43 10.65 14.34 10H9.66C9.57 10.65 9.5 11.32 9.5 12ZM14.59 19.56C15.19 18.45 15.65 17.25 15.97 16H18.92C17.96 17.65 16.43 18.93 14.59 19.56ZM16.5 12C16.5 12.68 16.44 13.34 16.36 14H19.74C19.9 13.36 20 12.69 20 12C20 11.31 19.9 10.64 19.74 10H16.36C16.44 10.66 16.5 11.32 16.5 12Z" fill-rule="evenodd" id="icon/action/language_24px"></path></svg>',
          },
        ];

        const linksHtml = links.map((link, i) => {
          return `<a href="${
            link.url
          }" target="_blank" class="w3-link-item w3-link-item-${i}" ><img src='data:image/svg+xml;base64,${btoa(
            unescape(encodeURIComponent(link.icon)),
          )}' /></a>`;
        });

        const linksContainer = document.createElement("div");
        linksContainer.classList.add("w3-links-container");
        linksContainer.innerHTML = linksHtml.join("");

        document.getElementById("web3helper-box-layer2")?.appendChild(linksContainer);
      } else {
        console.log("No NFTs found");
      }
    }
  }
};
setTimeout(() => {
  match();
}, 1000);

const style = document.createElement("style");

style.innerText = `
 #web3helper-box-layer2{
  position:absolute;
  top:50%;
  left:50%;
  width:50px;
  height:50px;
  margin-left:-25px;
  margin-top:-25px;
  z-index:-2;
 }
 #w3-links-container{

 }
  .w3-link-item{
    position:absolute;
    top:50%;
    left:50%;
    width:30px;
    height:30px;
    margin-left:-15px;
    margin-top:-15px;
    background:#3551FD;
    border-radius:50%;
    text-align:center;
    line-height:20px;
    transition:all 0.s ease-in-out;
  }
  
  .w3-link-item img{
    width:20px;
    height:20px;
    margin-top:5px;
    fill:#fff;
  }
  .w3-link-item-0{
    transition:all 0.3s ease-in-out 0.1s;
  }
    .w3-link-item-1{
    transition:all 0.3s ease-in-out 0.2s;
    }
    .w3-link-item-2{
    transition:all 0.3s ease-in-out 0.3s;
    }
    .w3-link-item-3{
    transition:all 0.3s ease-in-out 0.4s;
    }
    .w3-link-item-4{
    transition:all 0.3s ease-in-out 0.5s;
    }
 
  #web3helper-box:hover .w3-link-item-0{
    transform:translate(${Math.cos((Math.PI * 3) / 4 + Math.PI / 5) * 60}px,${
  Math.sin((Math.PI * 3) / 4 + Math.PI / 5) * 60
}px) rotate(360deg) scale(1.1) ;
  }
  #web3helper-box:hover .w3-link-item-1{
    transform:translate(${Math.cos((Math.PI * 3) / 4 + (Math.PI * 2) / 5) * 60}px,${
  Math.sin((Math.PI * 3) / 4 + (Math.PI * 2) / 5) * 60
}px) rotate(360deg) scale(1.1) ;
  }
    #web3helper-box:hover .w3-link-item-2{
    transform:translate(${Math.cos((Math.PI * 3) / 4 + (Math.PI / 5) * 3) * 60}px,${
  Math.sin((Math.PI * 3) / 4 + (Math.PI / 5) * 3) * 60
}px) rotate(360deg) scale(1.1) ;
    }
    #web3helper-box:hover .w3-link-item-3{
    transform:translate(${Math.cos((Math.PI * 3) / 4 + (Math.PI / 5) * 4) * 60}px,${
  Math.sin((Math.PI * 3) / 4 + (Math.PI / 5) * 4) * 60
}px) rotate(360deg) scale(1.1) ;
    }
    #web3helper-box:hover .w3-link-item-4{
    transform:translate(${Math.cos((Math.PI * 3) / 4 + (Math.PI / 5) * 5) * 60}px,${
  Math.sin((Math.PI * 3) / 4 + (Math.PI / 5) * 5) * 60
}px) rotate(360deg) scale(1.1) ;
    }
  `;

document.body.append(style);
